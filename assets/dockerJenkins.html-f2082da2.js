import{_ as n,W as s,X as a,a1 as e}from"./framework-95d2f262.js";const i={},l=e(`<h2 id="部署问题" tabindex="-1"><a class="header-anchor" href="#部署问题" aria-hidden="true">#</a> 部署问题</h2><div class="hint-container info"><p class="hint-container-title">问题描述</p><pre><code>6.18剁手在腾讯云买了一台2核2G的服务器，用来学习一下docker，尝试一下jenkins的自动化构建。 
在部署构建时，当构建到npm build步骤，服务器直接宕机，发现是内存爆表了。百度了一堆都没有解决到我的这个问题，升级服务器配置但又不划算。 
在这卡很久了，所以记录一下问题。
</code></pre></div><h2 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案" aria-hidden="true">#</a> 解决方案</h2><ol><li>升级配置,价格翻倍（不想）</li><li>添加虚拟内存(来自ChatGPT)</li></ol><h2 id="添加虚拟内存方法" tabindex="-1"><a class="header-anchor" href="#添加虚拟内存方法" aria-hidden="true">#</a> 添加虚拟内存方法</h2><ol><li><strong>检查当前虚拟内存情况</strong>：首先，您可以使用以下命令检查当前系统的虚拟内存情况：</li></ol><div class="language-linux line-numbers-mode" data-ext="linux"><pre class="language-linux"><code>free -h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><pre><code>这将显示已用和可用的内存以及交换空间的情况。请确保您的系统尚未使用交换空间，或者已使用的很少。 
</code></pre><ol start="2"><li><strong>创建交换文件</strong>：要创建4GB的交换文件，您可以执行以下命令：</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> fallocate <span class="token parameter variable">-l</span> 4G /swapfile   <span class="token comment"># 创建一个4GB的交换文件</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">600</span> /swapfile         <span class="token comment"># 设置交换文件的权限</span>
<span class="token function">sudo</span> <span class="token function">mkswap</span> /swapfile            <span class="token comment"># 将其标记为交换文件</span>
<span class="token function">sudo</span> <span class="token function">swapon</span> /swapfile            <span class="token comment"># 启用交换文件</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><pre><code>这将创建一个4GB大小的交换文件并启用它。您可以根据需要调整文件大小。
</code></pre><ol start="3"><li><strong>设置开机自启动</strong>：为了确保交换文件在系统重启后仍然可用，您需要将其添加到 /etc/fstab 文件中：</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&#39;/swapfile none swap sw 0 0&#39;</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> /etc/fstab
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="4"><li><strong>验证虚拟内存配置</strong>：您可以再次运行 free -h 命令来验证虚拟内存的配置，确保交换空间已经启用并且总可用内存增加到了4GB。</li></ol><div class="hint-container warning"><p class="hint-container-title">温馨提示</p><p>请注意，虚拟内存可以帮助您在内存资源紧张时保持系统的稳定性，但它不应成为替代物理内存的解决方案。如果您的应用程序需要更多内存来运行，最好考虑升级服务器的物理内存，这将是提高性能的更可靠方法。</p></div><p>实验成功后，记录结果，后续更新。</p>`,16),t=[l];function o(c,r){return s(),a("div",null,t)}const p=n(i,[["render",o],["__file","dockerJenkins.html.vue"]]);export{p as default};
