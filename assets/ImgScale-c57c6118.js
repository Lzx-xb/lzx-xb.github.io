import{A as l}from"./aos-df9eb3e3.js";import{_ as d}from"./plugin-vue_export-helper-c27b6911.js";import{o as g,c as h}from"./app-ce5502a9.js";import"./commonjsHelpers-de833af9.js";const r={data(){return{width:600,height:400,isDragging:!1,lastX:0,lastY:0,scale:.4,imgX:0,imgY:0,img:null,canvas:null,pc:!0}},beforeMount(){window.screen.width<419&&(this.pc=!1)},mounted(){l.init(),this.pc&&this.bindCanvasEvent("container")},methods:{bindCanvasEvent(n){let e=this;this.canvas=document.getElementById("canvas");const a=this.canvas.getContext("2d");let c=0,i=1;this.img=new Image,this.img.src="/bgwallhaven.png",this.img.onload=function(){e.drawImage(a)},this.canvas.addEventListener("mousedown",function(t){e.isDragging=!0,e.lastX=t.clientX,e.lastY=t.clientY}),window.addEventListener("mouseup",function(t){e.isDragging=!1}),this.canvas.addEventListener("mouseup",function(t){e.isDragging=!1}),this.canvas.addEventListener("wheel",function(t){Math.sign(t.deltaY)>0?e.scale*=.9:e.scale*=1.1,e.drawImage(a),t.preventDefault()}),this.canvas.addEventListener("mousemove",function(t){if(e.isDragging){const s=t.clientX-e.lastX,o=t.clientY-e.lastY;e.imgX+=s,e.imgY+=o,e.lastX=t.clientX,e.lastY=t.clientY,e.drawImage(a)}}),this.canvas.addEventListener("touchstart",function(t){t.touches.length===2?(c=Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY),i=e.scale):t.touches.length===1&&(e.isDragging=!0,e.lastX=t.touches[0].pageX,e.lastY=t.touches[0].pageY)}),this.canvas.addEventListener("touchmove",function(t){if(t.touches.length===2){const s=Math.hypot(t.touches[0].pageX-t.touches[1].pageX,t.touches[0].pageY-t.touches[1].pageY);e.scale=i*(s/c),e.drawImage(a)}else if(e.isDragging&&t.touches.length===1){const s=t.touches[0].pageX-e.lastX,o=t.touches[0].pageY-e.lastY;e.imgX+=s,e.imgY+=o,e.lastX=t.touches[0].pageX,e.lastY=t.touches[0].pageY,e.drawImage(a)}}),this.canvas.addEventListener("touchend",function(t){e.isDragging=!1}),this.canvas.addEventListener("touchcancel",function(t){e.isDragging=!1})},drawImage(n){n.clearRect(0,0,this.canvas.width,this.canvas.height),n.drawImage(this.img,this.imgX,this.imgY,this.img.width*this.scale,this.img.height*this.scale)}}},u={id:"container"},m={key:0,id:"canvas",width:"600",height:"400","data-aos":"fade-down","data-aos-easing":"linear","data-aos-duration":"1000"},p={key:1};function v(n,e,a,c,i,t){return g(),h("div",u,[i.pc?(g(),h("canvas",m)):(g(),h("span",p,"暂未支持移动端"))])}const w=d(r,[["render",v],["__file","ImgScale.vue"]]);export{w as default};
